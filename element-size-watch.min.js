(function(){function x(b,a,d){a=a||"";var e=b.parentElement.getClientRects()[0];b=b.getClientRects()[0];a.search("%")===a.length-1?(a=parseFloat(a.replace(/%$/,"")),a=a/100*(d?e.width:e.height)):a=parseInt(a.replace(/[^0-9.-]/g,""));return{width:b.width,height:b.height,querySize:a}}function m(b){var a={},d=0;if("*"===b)return a;if(!b||/^\s*$/.test(b))return null;b=b.split(/\s*,\s*/);if(!b.length)return null;var e,c;for(e=0;e<b.length;e++)c=b[e].split(/\s*:\s*/),!c||2>c.length||4<c.length||(c[0]=c[0].trim(),
c[1]=c[1].trim(),c[0]&&c[1]&&(/[0-9]$/.test(c[1])&&(c[1]+="px"),c[0]+="-"+ ++d,a[c[0]]=c[1],c[2]&&!/^\s*$/.test(c[2])&&(a[c[0]+"-alias"]=c[2]),"suppress"===c[3]?a[c[0]+"-suppress"]=!0:"clear"===c[3]&&(a[c[0]+"-clear"]=!0)));return a}function z(b,a,d,e,c){function m(){for(k=l.length-1;0<=k;k--)f=l[k].split(/:/),"removed"===f[0]||"cleared"===f[0]?"suppressed"===f[2]?-1===n.indexOf(f[1])&&n.push(f[1]):b.classList.contains(f[1])&&(b.classList.remove(f[1]),n.push(f[1])):"added"===f[0]&&("suppressed"===
f[2]?-1===p.indexOf(f[1])&&p.push(f[1]):b.classList.contains(f[1])||(b.classList.add(f[1]),p.push(f[1])));"function"===typeof d&&(0===v.length||n.length||p.length)&&d({element:b,elementSize:{width:h.width,height:h.height},classesRemoved:n,classesAdded:p})}var t,v=Object.keys(a),g,w,h=x(b),u,y,q,r={},l,k,f,n=[],p=[];for(t=0;t<v.length;t++)g=v[t],g.search("-alias")!==Math.max(g.length-6,0)&&g.search("-suppress")!==Math.max(g.length-9,0)&&g.search("-clear")!==Math.max(g.length-6,0)&&(w=a[g],u=0===g.search("min"),
y=0===g.search("max"),q=-1!==g.search("width"),h=x(b,w,q),u=u?(q?h.width:h.height)>=h.querySize:y?(q?h.width:h.height)<=h.querySize:h.querySize===(q?h.width:h.height),g=(u?!0!==a[g+"-clear"]?"added:":"cleared:":"removed:")+(a[g+"-alias"]?a[g+"-alias"]:g.replace(/-[0-9]+$/,"")+"-"+w.replace(/%/,"pc")+(c?"":":suppressed"))+(a[g+"-suppress"]?":suppressed":""),r[g]=null);l=Object.keys(r);l.sort();for(k=0;k<l.length;k++)f=l[k].replace(/:suppressed$/,"").split(/:/),"removed"!==f[0]&&(a="removed:"+f[1],
delete r[a],delete r[a+":suppressed"]);l=Object.keys(r);l.sort().sort(function(a,b){return"cleared"===a.split(/:/)[0]?-1:"cleared"===b.split(/:/)[0]?1:0});e&&window.requestAnimationFrame?window.requestAnimationFrame(m):m()}window.elementSizeWatch=function(b,a){if(!(b instanceof HTMLElement))return!1;a="undefined"!==typeof a&&"[object Object]"===Object.prototype.toString(a)?a:{};a.querySpec="string"===typeof a.querySpec?m(a.querySpec):m(b.getAttribute("data-size-watch"));a.useAnimationFrame="undefined"!==
typeof a.useAnimationFrame?a.useAnimationFrame:!0;a.allowQueryClasses="undefined"!==typeof a.allowQueryClasses?a.allowQueryClasses:!0;a.useDeferredEventBinding="undefined"!==typeof a.useDeferredEventBinding?a.useDeferredEventBinding:!1;if(!a.querySpec)return!1;a.element=b;var d,e=function(){z(a.element,a.querySpec,a.callback,a.useAnimationFrame,a.allowQueryClasses)};b.elementSizeWatchInspect=e;a.useDeferredEventBinding?b.elementSizeWatchOnResizeEventBind=function(){d||(d=document.createElement("iframe"),
d.style.cssText="display: inline; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: visible; z-index: -1000; visibility: visible; opacity: 0; border: none; padding: 0px; margin: 0px; background: transparent; pointer-events: none;",b.getClientRects()[0],b.appendChild(d));d.contentWindow?(d.contentWindow.onresize=e,e()):setTimeout(function(){d.contentWindow.onresize=e;e()},0)}:(d=document.createElement("iframe"),d.style.cssText="display: inline; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: visible; z-index: -1000; visibility: visible; opacity: 0; border: none; padding: 0px; margin: 0px; background: transparent; pointer-events: none;",
b.getClientRects()[0],b.appendChild(d),d.contentWindow?(d.contentWindow.onresize=e,e()):setTimeout(function(){d.contentWindow.onresize=e;e()},0));return!0}})();
