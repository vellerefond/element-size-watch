window.addEventListener("load",function t(){function e(t,e,i){var n=t.parentElement,s=n.getClientRects()[0],r=t.getClientRects()[0];return e.search("%")===e.length-1?(e=parseFloat(e.replace(/%$/,"")),e=e/100*(i?s.width:s.height)):e=parseInt(e.replace(/[^0-9.-]/g,"")),{width:r.width,height:r.height,querySize:e}}function i(t){var e={},i=t.getAttribute("data-size-watch");if(!i||/^\s*$/.test(i))return null;if(i=i.split(/\s*,\s*/),!i)return null;var n,s;for(n=0;n<i.length;n++)s=i[n].split(/\s*:\s*/),!s||2!==s.length&&3!==s.length||(s[0]=s[0].trim(),s[1]=s[1].trim(),s[0]&&s[1]&&(e[s[0]]=s[1],s[2]&&!/^\s*$/.test(s[2])&&(e[s[0]+"-alias"]=s[2])));return e}function n(t,i,n){return function(t,i){var s,r,a,h,l,o,c,d,u,p=Object.keys(i),g=[],f=[];for(s=0;s<p.length;s++)r=p[s],r.search("-alias")!==Math.max(r.length-6,0)&&(a=i[r],l=0===r.search("min"),o=0===r.search("max"),c=r.search("width")===r.length-5,h=e(t,a,c),d=l?(c?h.width:h.height)>=h.querySize:o?(c?h.width:h.height)<=h.querySize:h.querySize===(c?h.width:h.height),u=i[r+"-alias"]?i[r+"-alias"]:r+"-"+a.replace(/%/,"pc"),d?t.classList.contains(u)||(g.push(u),t.classList.add(u)):t.classList.contains(u)&&(f.push(u),t.classList.remove(u)));"function"==typeof n&&(g.length||f.length)&&n({element:t,elementSize:{width:h.width,height:h.height},classesAdded:g,classesRemoved:f})}.bind(null,t,i)}window.removeEventListener("load",t),HTMLElement.prototype.sizeWatch=function(t,e){if(!this.classList||!this.getAttribute)return this;"string"==typeof t&&(e=t,t=void 0),"string"==typeof e&&this.setAttribute("data-size-watch",e);var e=i(this);if(!e)return this;var s=document.createElement("iframe");return s.src="about:blank",s.style.cssText="display: inline; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: visible; z-index: -1000; visibility: visible; opacity: 0; border: none; padding: 0px; margin: 0px; background: transparent; pointer-events: none;",this.appendChild(s),s.contentWindow.onresize=n(this,e,t),this}});
