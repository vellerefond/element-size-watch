window.addEventListener("load",function e(){function t(e,t,i){var n=e.parentElement,s=n.getClientRects()[0],r=e.getClientRects()[0];return t.search("%")===t.length-1?(t=parseFloat(t.replace(/%$/,"")),t=t/100*(i?s.width:s.height)):t=parseInt(t.replace(/[^0-9.-]/g,"")),{width:r.width,height:r.height,querySize:t}}function i(e){var t={},i=0;if(!e||/^\s*$/.test(e))return null;if(e=e.split(/\s*,\s*/),!e.length)return null;var n,s;for(n=0;n<e.length;n++)s=e[n].split(/\s*:\s*/),!s||2!==s.length&&3!==s.length||(s[0]=s[0].trim(),s[1]=s[1].trim(),s[0]&&s[1]&&(s[0]+="-"+ ++i,t[s[0]]=s[1],s[2]&&!/^\s*$/.test(s[2])&&(t[s[0]+"-alias"]=s[2])));return t}function n(e){return function(i,n,s){function r(){for(f=g.length-1;f>=0;f--)y=g[f].split(/:/),"removed"===y[0]?i.classList.contains(y[1])&&(i.classList.remove(y[1]),q.push(y[1])):"added"===y[0]&&(i.classList.contains(y[1])||(i.classList.add(y[1]),S.push(y[1])));"function"==typeof s&&(q.length||S.length)&&s({element:i,elementSize:{width:h.width,height:h.height},classesRemoved:q,classesAdded:S})}var a,l,o,h,d,c,u,p,m,g,f,y,w,v=Object.keys(n),b={},q=[],S=[];for(a=0;a<v.length;a++)l=v[a],l.search("-alias")!==Math.max(l.length-6,0)&&(o=n[l],d=0===l.search("min"),c=0===l.search("max"),u=-1!==l.search("width"),h=t(i,o,u),p=d?(u?h.width:h.height)>=h.querySize:c?(u?h.width:h.height)<=h.querySize:h.querySize===(u?h.width:h.height),m=(p?"added:":"removed:")+(n[l+"-alias"]?n[l+"-alias"]:l.replace(/-[0-9]+$/,"")+"-"+o.replace(/%/,"pc")),b[m]=null);for(g=Object.keys(b),g.sort(),f=0;f<g.length;f++)y=g[f].split(/:/),"removed"!==y[0]&&(w="removed:"+y[1],delete b[w],delete b[w+"-alias"]);g=Object.keys(b),g.sort(),e.useAnimationFrame&&window.requestAnimationFrame?window.requestAnimationFrame(r):r()}.bind(null,e.element,e.querySpec,e.callback)}window.removeEventListener("load",e),HTMLElement.prototype.sizeWatch=function(e){if(e="undefined"!=typeof e&&"[object Object]"===Object.prototype.toString(e)?e:{},e.useAnimationFrame="undefined"!=typeof e.useAnimationFrame?e.useAnimationFrame:!0,e.querySpec=i("string"==typeof e.querySpec?e.querySpec:this.getAttribute("data-size-watch")),!e.querySpec)return this;var t=document.createElement("iframe");return t.src="about:blank",t.style.cssText="display: inline; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: visible; z-index: -1000; visibility: visible; opacity: 0; border: none; padding: 0px; margin: 0px; background: transparent; pointer-events: none;",this.appendChild(t),e.element=this,t.contentWindow.onresize=n(e),this}});
