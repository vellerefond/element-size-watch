(function(){function x(b,a,f){a=a||"";var g=b.parentElement.getClientRects()[0];b=b.getClientRects()[0];a.search("%")===a.length-1?(a=parseFloat(a.replace(/%$/,"")),a=a/100*(f?g.width:g.height)):a=parseInt(a.replace(/[^0-9.-]/g,""));return{width:b.width,height:b.height,querySize:a}}function m(b){var a={},f=0;if("*"===b)return a;if(!b||/^\s*$/.test(b))return null;b=b.split(/\s*,\s*/);if(!b.length)return null;var g,c;for(g=0;g<b.length;g++)c=b[g].split(/\s*:\s*/),!c||2>c.length||4<c.length||(c[0]=c[0].trim(),
c[1]=c[1].trim(),c[0]&&c[1]&&(/[0-9]$/.test(c[1])&&(c[1]+="px"),c[0]+="-"+ ++f,a[c[0]]=c[1],c[2]&&!/^\s*$/.test(c[2])&&(a[c[0]+"-alias"]=c[2]),"suppress"===c[3]?a[c[0]+"-suppress"]=!0:"clear"===c[3]&&(a[c[0]+"-clear"]=!0)));return a}function z(b,a,f,g,c){function m(){for(k=l.length-1;0<=k;k--)d=l[k].split(/:/),"removed"===d[0]||"cleared"===d[0]?"suppressed"===d[2]?-1===n.indexOf(d[1])&&n.push(d[1]):b.classList.contains(d[1])&&(b.classList.remove(d[1]),n.push(d[1])):"added"===d[0]&&("suppressed"===
d[2]?-1===p.indexOf(d[1])&&p.push(d[1]):b.classList.contains(d[1])||(b.classList.add(d[1]),p.push(d[1])));"function"===typeof f&&(0===v.length||n.length||p.length)&&f({element:b,elementSize:{width:h.width,height:h.height},classesRemoved:n,classesAdded:p})}var t,v=Object.keys(a),e,w,h=x(b),u,y,q,r={},l,k,d,n=[],p=[];for(t=0;t<v.length;t++)e=v[t],e.search("-alias")!==Math.max(e.length-6,0)&&e.search("-suppress")!==Math.max(e.length-9,0)&&e.search("-clear")!==Math.max(e.length-6,0)&&(w=a[e],u=0===e.search("min"),
y=0===e.search("max"),q=-1!==e.search("width"),h=x(b,w,q),u=u?(q?h.width:h.height)>=h.querySize:y?(q?h.width:h.height)<=h.querySize:h.querySize===(q?h.width:h.height),e=(u?!0!==a[e+"-clear"]?"added:":"cleared:":"removed:")+(a[e+"-alias"]?a[e+"-alias"]:e.replace(/-[0-9]+$/,"")+"-"+w.replace(/%/,"pc")+(c?"":":suppressed"))+(a[e+"-suppress"]?":suppressed":""),r[e]=null);l=Object.keys(r);l.sort();for(k=0;k<l.length;k++)d=l[k].replace(/:suppressed$/,"").split(/:/),"removed"!==d[0]&&(a="removed:"+d[1],
delete r[a],delete r[a+":suppressed"]);l=Object.keys(r);l.sort().sort(function(a,b){return"cleared"===a.split(/:/)[0]?-1:"cleared"===b.split(/:/)[0]?1:0});g&&window.requestAnimationFrame?window.requestAnimationFrame(m):m()}window.elementSizeWatch=function(b,a){if(!(b instanceof HTMLElement))return!1;a="undefined"!==typeof a&&"[object Object]"===Object.prototype.toString(a)?a:{};a.querySpec="string"===typeof a.querySpec?m(a.querySpec):m(b.getAttribute("data-size-watch"));a.useAnimationFrame="undefined"!==
typeof a.useAnimationFrame?a.useAnimationFrame:!0;a.allowQueryClasses="undefined"!==typeof a.allowQueryClasses?a.allowQueryClasses:!0;a.useDeferredEventBinding="undefined"!==typeof a.useDeferredEventBinding?a.useDeferredEventBinding:!1;if(!a.querySpec)return!1;a.element=b;var f,g=function(){z(a.element,a.querySpec,a.callback,a.useAnimationFrame,a.allowQueryClasses)};b.elementSizeWatchInspect=g;a.useDeferredEventBinding?b.elementSizeWatchOnResizeEventBind=function(){f||(f=document.createElement("iframe"),
f.style.cssText="display: inline; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: visible; z-index: -1000; visibility: visible; opacity: 0; border: none; padding: 0px; margin: 0px; background: transparent; pointer-events: none;",b.getClientRects()[0],b.appendChild(f));f.contentWindow.onresize=g;g()}:(f=document.createElement("iframe"),f.style.cssText="display: inline; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: visible; z-index: -1000; visibility: visible; opacity: 0; border: none; padding: 0px; margin: 0px; background: transparent; pointer-events: none;",
b.getClientRects()[0],b.appendChild(f),f.contentWindow.onresize=g,g());return!0}})();
